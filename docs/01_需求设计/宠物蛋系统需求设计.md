---
status: 已审核
version: 1.0
last_updated: 2026-01-29
reviewer: 用户
---

# ZetaFrog 2.0 宠物蛋系统 - 需求设计文档

## 一、业务背景

### 1.1 产品目标

将拓麻歌子养成机制融入 ZetaFrog，打造**链上生命养成 + 跨链探索**的创新体验。

| 维度     | 旧版 ZetaFrog        | 新版 ZetaFrog 2.0                |
| -------- | -------------------- | -------------------------------- |
| 核心玩法 | 跨链旅行 + AI日记    | **养成责任 + 跨链旅行 + AI日记** |
| 用户参与 | 被动等待青蛙旅行归来 | **主动照顾 + 被动旅行双循环**    |
| 情感连接 | 弱（青蛙只是工具）   | **强（青蛙是需要照顾的生命）**   |

### 1.2 开发范围

本次开发 **A/B/C/D 四个模块**（Week 8-12 目标）：

- **模块 A**: 生命状态系统
- **模块 B**: 基础养成操作
- **模块 C**: 成长进化系统
- **模块 D**: 旅行系统增强

---

## 二、内部讨论记录

### 讨论主题：状态衰减机制设计

**产品经理**：用户需要有「照顾责任感」，但不能太肝。建议衰减速度适中，每天登录 1-2 次即可维持健康状态。

**架构师**：状态计算采用混合模式 - 后端定时任务处理关键事件（生病/死亡），前端根据 `lastStatusUpdate` 实时计算展示值。这样服务器压力可控。

**测试工程师**：需要考虑边界情况：

- 用户 7 天不登录会怎样？→ 应有保护机制，不能直接死亡
- 时区问题？→ 使用 UTC 时间统一计算

**用户代言人**：佛系玩家每天只想花 5-10 分钟，衰减速度不能太快。建议增加「托管模式」让高级用户可以自动喂食。

**最终决策**：

1. 衰减速度按原 PRD 设计，但增加 48 小时死亡宽限期
2. v1.0 暂不实现托管模式，作为 v2.1 特性
3. 使用 UTC 时间，前端展示时转换为本地时间

---

## 三、用户场景

### 场景 1：新用户首次养成

```
用户连接钱包 → 青蛙已存在（继承现有青蛙）→ 系统初始化状态属性
→ 展示状态面板教程 → 引导完成首次喂食 → 获得新手奖励
```

> 本版本不实现蛋孵化，新用户直接使用现有青蛙，状态属性在首次访问时初始化。

### 场景 2：日常养成循环

```
用户登录 → 查看状态面板 → 发现饱食度 < 50%
→ 点击喂食 → 选择食物 → 播放动画 → 状态恢复
→ 解锁旅行条件 → 发起跨链旅行
```

### 场景 3：异常状态处理

```
用户 3 天未登录 → 健康度降至 < 15%
→ 下次登录时青蛙显示 😷 表情 → 提示需要治疗
→ 用户购买药水 → 健康度恢复 → 恢复正常状态
```

### 场景 4：进化解锁

```
用户完成 15 次旅行 + 保持平均健康度 ≥ 70
→ 系统检测到满足进化条件 → 弹出进化提示
→ 用户确认进化 → 青蛙变为「探险型」→ 获得旅行奖励加成
```

---

## 四、功能需求详细设计

### 模块 A：生命状态系统

#### A.1 状态属性定义

| 属性   | 字段名      | 范围  | 初始值 | 图标 |
| ------ | ----------- | ----- | ------ | ---- |
| 饱食度 | hunger      | 0-100 | 80     | 🍔   |
| 幸福度 | happiness   | 0-100 | 70     | 😊   |
| 清洁度 | cleanliness | 0-100 | 100    | ✨   |
| 健康度 | health      | 0-100 | 100    | ❤️   |
| 活力值 | energy      | 0-100 | 100    | ⚡   |

#### A.2 状态衰减规则

| 属性   | 衰减速率   | 衰减条件               | 警戒线 | 危险线 |
| ------ | ---------- | ---------------------- | ------ | ------ |
| 饱食度 | -5/小时    | 持续                   | 30     | 10     |
| 幸福度 | -3/小时    | 持续                   | 30     | 10     |
| 清洁度 | -15~-25/次 | 随机排泄事件           | 40     | 20     |
| 健康度 | -8/小时    | 饱食度<20 或 清洁度<30 | 40     | 15     |
| 活力值 | -2/小时    | 持续                   | 20     | 5      |

#### A.3 状态联动规则

```
饱食度 < 20 ──┐
              ├──→ 健康度开始衰减
清洁度 < 30 ──┘

健康度 < 40 ─────→ 幸福度衰减速度 x2

活力值 < 20 ─────→ 无法发起旅行

幸福度 > 80 ─────→ XP获取 +20%

全属性 > 80 ─────→ "完美状态" buff, 纪念品掉落率 +30%
```

#### A.4 前端状态面板需求

- **位置**：青蛙详情页左侧面板
- **实时计算**：根据 `lastStatusUpdate` 计算当前展示值
- **视觉反馈**：
  - 正常：绿色进度条
  - 警戒（< 警戒线）：橙色 + ⚠️ 图标
  - 危险（< 危险线）：红色 + 闪烁动画

---

### 模块 B：基础养成操作

#### B.1 喂食功能

**交互流程**：

```
点击"喂食" → 打开食物选择面板 → 选择食物 → 确认购买
→ 播放喂食动画 → 更新状态值 → 关闭面板
```

**食物类型（MVP 版本）**：

| 食物     | 效果              | 价格($LILY) |
| -------- | ----------------- | ----------- |
| 面包     | 饱食度+15         | 10          |
| 虫子便当 | 饱食度+25, 活力+5 | 25          |
| 蛋糕     | 幸福度+20         | 15          |

#### B.2 清洁功能

**触发机制**：

- 后端定时任务每 2-4 小时随机触发「排泄事件」
- 触发时清洁度 -15~-25
- 前端显示 💩 图标

**操作**：用户点击「清洁」按钮 → 播放动画 → 清洁度重置 100

#### B.3 玩耍功能（MVP 只做 1 个游戏）

**猜方向小游戏**：

- 规则：猜青蛙跳向左/右
- 奖励：幸福度+10, 10-30 $LILY
- 限制：每天 5 次

#### B.4 治疗功能

**生病条件**：健康度 < 15 持续超过 2 小时

**治疗操作**：购买药水 → 健康度恢复

---

### 模块 C：成长进化系统

#### C.1 生命周期阶段（简化版）

> 本版本不实现蛋孵化，所有青蛙直接为「成长期」

| 阶段 | 名称   | 特点                     |
| ---- | ------ | ------------------------ |
| 2    | 成长期 | 默认状态，可旅行，可进化 |
| 3    | 成熟期 | 达成进化条件后           |

#### C.2 进化分支（MVP 只做 3 种）

| 进化目标 | 条件                    | 特殊效果     |
| -------- | ----------------------- | ------------ |
| 探险型蛙 | 旅行≥15次 + 健康度≥70   | 旅行奖励+15% |
| 学者型蛙 | AI对话≥30次 + 日记≥10篇 | AI对话更深度 |
| 社交型蛙 | 好友≥5人 + 互动≥50次    | 好友上限+10  |

#### C.3 进化交互

满足条件时弹出进化提示 → 用户确认 → 执行进化 → 更新青蛙类型

---

### 模块 D：旅行系统增强

#### D.1 旅行前置检查

| 检查项 | 最低要求 | 提示语                       |
| ------ | -------- | ---------------------------- |
| 饱食度 | ≥50      | "青蛙太饿了，先喂点东西吧！" |
| 健康度 | ≥30      | "青蛙身体不适，不宜远行"     |
| 活力值 | ≥40      | "青蛙太累了，让它休息一下"   |

#### D.2 状态对旅行的影响

| 出发时状态 | 旅行影响           |
| ---------- | ------------------ |
| 幸福度≥80  | 纪念品掉落概率+20% |
| 健康度≥90  | 旅行时间-15%       |
| 全属性≥80  | 稀有掉落+10%       |

#### D.3 旅行归来结算

```
旅行结束 → 状态变化:
├── 饱食度: -30
├── 活力值: -40
├── 幸福度: +20
└── XP: +50~200
```

---

## 五、假设清单

| 假设             | 说明                       | 状态      |
| ---------------- | -------------------------- | --------- |
| 不实现蛋孵化     | 合约改动复杂，移至 v2.1    | ✅ 已确认 |
| $LILY 作为软货币 | 第一阶段链下，后续版本上链 | ✅ 已确认 |
| 进化不可逆       | 进化后无法回退，增加决策感 | ✅ 已确认 |
| 死亡机制暂缓     | MVP 只实现生病，不实现死亡 | ✅ 已确认 |
| 旅行减少惩罚     | 旅行期间状态衰减速度减半   | ✅ 已确认 |

---

## 六、边界条件与异常处理

| 场景           | 处理方式                          |
| -------------- | --------------------------------- |
| 状态值 < 0     | 强制设为 0                        |
| 状态值 > 100   | 强制设为 100                      |
| 用户长期不登录 | 状态持续衰减，但不触发死亡（MVP） |
| 喂食时余额不足 | 提示并引导充值                    |
| 旅行中无法喂食 | 状态暂停衰减                      |

---

---

## 变更记录

| 日期       | 变更内容           |
| ---------- | ------------------ |
| 2026-01-29 | 初始化需求设计文档 |
