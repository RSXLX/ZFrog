---
status: 已审核
version: 1.0
last_updated: 2026-01-13
reviewer: AI
---

# 好友系统模块需求设计

## 一、模块概述

好友系统允许用户添加好友、查看好友青蛙状态、互赠礼物，增强社交互动体验。

## 二、用户场景

### 2.1 好友管理
- 搜索并添加好友（通过钱包地址或用户名）
- 接受/拒绝好友申请
- 删除好友
- 查看好友列表

### 2.2 好友互动
- 查看好友青蛙的状态
- 访问好友的花园
- 给好友青蛙送礼物
- 发送消息

### 2.3 好友动态
- 查看好友的旅行动态
- 好友成就通知
- 青蛙状态更新推送

## 三、功能需求

### 3.1 后端功能
| 功能 | 描述 |
|------|------|
| 好友请求 | 发送/接受/拒绝好友请求 |
| 好友列表 | 获取好友列表和状态 |
| 礼物系统 | 发送和接收礼物 |
| 消息系统 | 好友间消息传递 |

### 3.2 前端功能
| 功能 | 描述 |
|------|------|
| 好友面板 | 浮动好友列表面板 |
| 添加好友 | 搜索和添加好友界面 |
| 聊天界面 | 好友间聊天窗口 |

## 四、数据结构

```typescript
interface Friend {
  id: string;
  userId: string;
  friendId: string;
  status: 'pending' | 'accepted' | 'blocked';
  createdAt: Date;
}

interface Gift {
  id: string;
  fromUserId: string;
  toUserId: string;
  itemType: string;
  quantity: number;
  claimed: boolean;
}
```

## 五、接口依赖

- 后端路由：`friends.routes.ts`、`message.routes.ts`、`chat.routes.ts`
- 前端组件：`components/friend-float/`

## 六、边界条件

- 好友数量上限
- 每日送礼次数限制
- 防止垃圾消息
- 屏蔽用户功能

---
