# ZetaFrog 2.0 统一产品需求文档 (Unified PRD)

> **版本**: 2.0 (Draft)
> **状态**: 规划中
> **核心目标**: 从单一的“养蛙旅行”进化为具备 **资产韧性、深度社交、复杂博弈** 的元宇宙生态系统，并夯实跨链基础设施。

---

## 1. 产品愿景 (Product Vision)

**"Care to Earn, Breed to Own, Travel to Connect."**

ZetaFrog 2.0 旨在解决 Web3 游戏生命周期短、交互深度不足的问题。通过引入冬眠机制保护用户资产，建立家族 DAO 深化社交连接，利用基因工程增加博弈深度，并完善跨链基础设施以确保资产的真实拥有权。

## 2. 核心战略支柱 (Strategic Pillars)

1.  **韧性 (Resilience)**: 拒绝资产“死刑”。引入冬眠与唤醒机制，让流失用户即使在数月后回归，也能通过支付代价重启游戏，而非资产归零。
2.  **连接 (Connection)**: 拒绝单机游戏。从点对点的“好友投喂”升级为点对面的“家族协作”，通过共同利益（家族树、特产合成）绑定用户关系。
3.  **深度 (Depth)**: 拒绝简单合成。引入孟德尔遗传与显隐性基因，结合动态经济模型（G-Factor），让繁殖和交易成为策略博弈。
4.  **可靠 (Reliability)**: 拒绝虚假跨链。修复和完善跨链交互体验，确保每一份跨链纪念品都在链上真实铸造，每一次探索都留下不可篡改的足迹。

## 3. 功能模块详解 (Functional Modules)

### 3.1 模块 A: 资产韧性系统 (Hibernation & Revival)

_解决痛点：用户因忙碌忘记交互导致宠物死亡，永久流失。_

- **A1. 软性冬眠 (Soft Hibernation)**:
  - **触发条件**: 连续 96 小时无交互 (72-96h 为缓冲期，收益减半)。
  - **状态**: 青蛙进入冻结状态，生命值不减扣，停止产出，停止消耗。
- **A2. 唤醒机制 (Revival)**:
  - **成本模型**: $Cost = Base \times (1 + Level\%) \times \ln(Days)$。冬眠越久，唤醒越贵。
  - **社交祈福**: 好友可消耗活力“祈福”，每人减免 15% 唤醒费（上限 60%），促进回归社交传播。

### 3.2 模块 B: 深度社交系统 (Social 2.0)

_解决痛点：好友列表仅用于“偷菜”式浅层交互，缺乏共同目标。_

- **B1. 家族 DAO (Frog Family)**:
  - **建立**: 需消耗 $ZETA 及高等级青蛙作为族长。
  - **图腾共建**: 成员每日浇水升级家族图腾，全员共享 Buff (如旅行加速)。
  - **周常任务**: 家族全员累计旅行里程，达标发放共享宝箱。
- **B2. 结伴旅行 V2 (Co-op Travel)**:
  - **友情值**: 结伴增加 Affinity，解锁“双人合影”纪念品。
  - **救援机制**: 青蛙跨链迷路 (5% 概率) 时，好友支付 Gas 救援可分得 30% 收益。超时 4h 后进入“公共救援广场”。

### 3.3 模块 C: 基因与经济 (Genetics & Economy)

_解决痛点：繁殖结果随机性过大，经济模型单一易通胀。_

- **C1. 孟德尔基因工程**:
  - **显隐性**: 基因位包含 `{显性, 隐性}`。只有 `{隐, 隐}` 组合才能表达稀有特征（返祖）。
  - **育种博弈**: 玩家需通过族谱推测隐性基因，培育高价纯血青蛙。
- **C2. 动态调节 (G-Factor)**:
  - **算法**: 基于全服昨日 `产出/消耗` 比率，动态调整今日商店税率和维修费。
  - **目的**: 自动平抑通胀，延长经济寿命。

### 3.4 模块 D: 基础设施重构 (Infrastructure Readiness)

_解决痛点：当前跨链功能存在“数据上链不全”的技术债，影响资产神圣性。_

- **D1. 跨链纪念品真·铸造 (True Minting)**:
  - **现状**: 跨链旅行的纪念品仅在 DB 生成，未上链。
  - **目标**: 升级 `OmniTravel` 合约回调逻辑，确保在目标链或在回调回主链时，原子化铸造 `SouvenirNFT`。
  - **要求**: 必须保证 `TravelCompleted` 事件与 `SouvenirMinted` 事件的因果关联。
- **D2. 统一地址配置 (Config Unification)**:
  - **目标**: 移除所有 Service 层硬编码的合约地址 Fallback，强制使用配置文件，避免测试网/主网切换事故。

## 4. 实施路线图 (Roadmap)

| 阶段                    | 周期     | 核心任务                           | 说明                                               |
| :---------------------- | :------- | :--------------------------------- | :------------------------------------------------- |
| **Phase 1: 补债与地基** | Week 1   | 模块 D (跨链修复)                  | 优先修复纪念品上链问题，统一配置，确保资产安全性。 |
| **Phase 2: 韧性与连接** | Week 2-3 | 模块 A (冬眠) + 模块 B (好友/救援) | 降低用户流失风险，通过救援机制建立初步强连接。     |
| **Phase 3: 深度与博弈** | Week 4-5 | 模块 C (基因/经济) + 家族 DAO      | 引入复杂玩法，提升高阶玩家留存与付费意愿。         |
| **Phase 4: 桌面与全端** | Week 6   | 桌面端联动 + 通知系统              | 打通 Web3 与桌面的屏障，实现全天候陪伴。           |

## 5. 验收标准概览 (Success Metrics)

1.  **技术指标**: 跨链旅行成功率 > 98%，纪念品上链率 100%。
2.  **留存指标**: 引入冬眠机制后，流失用户回归率提升 20%。
3.  **社交指标**: 30% 的活跃用户加入家族，日均发生 500 次“救援”或“祈福”交互。
4.  **经济指标**: G-Factor 机制生效，$LILY 价格波动率控制在预设范围内。
