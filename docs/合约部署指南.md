# 🎯 合约部署指南

## ✅ 已完成的工作

1. **合约代码修改**：已修改 ZetaFrogNFT.sol，删除了零地址验证
2. **测试用例更新**：已添加零地址随机探索的测试用例
3. **本地测试通过**：已在 hardhat 网络上验证零地址被接受

## 📋 部署步骤

### 1. 配置私钥

编辑 `contracts/.env` 文件，添加您的私钥：

```bash
# 部署合约的私钥 (不要提交到 git)
PRIVATE_KEY=your_private_key_here

# 后端服务地址 (用于设置TravelManager权限)
BACKEND_SERVICE_ADDRESS=your_backend_service_address
```

⚠️ **注意**：请确保该私钥在 ZetaChain Athens 测试网上有足够的 ZETA 代币用于部署。

### 2. 部署合约

```bash
cd contracts
npx hardhat run scripts/deploy.js --network zetaAthens
```

部署完成后，脚本会输出新的合约地址，类似：

```
ZetaFrogNFT: 0x新的合约地址
SouvenirNFT: 0x新的纪念品合约地址
```

### 3. 更新前端配置

编辑 `frontend/.env`，更新合约地址：

```bash
# Contracts - 更新为新部署的地址
VITE_ZETAFROG_ADDRESS=0x新的合约地址
VITE_SOUVENIR_ADDRESS=0x新的纪念品合约地址
```

### 4. 更新后端配置

编辑 `backend/.env`，更新合约地址：

```bash
# Contracts - 更新为新部署的地址
ZETAFROG_NFT_ADDRESS="0x新的合约地址"
SOUVENIR_NFT_ADDRESS="0x新的纪念品合约地址"
```

### 5. 验证部署

运行测试脚本验证新合约：

```bash
cd contracts
ZETAFROG_NFT_ADDRESS=0x新的合约地址 npx hardhat run scripts/test-zero-address.js --network zetaAthens
```

## 🧪 测试零地址功能

部署完成后，您可以通过以下方式测试：

1. **前端测试**：使用前端界面发起随机探索
2. **API 测试**：直接调用后端 API 发起随机探索
3. **合约测试**：使用 ethers.js 等工具直接调用合约

## 📝 验证清单

- [ ] 私钥已配置
- [ ] 合约已部署到 ZetaChain Athens
- [ ] 前端配置已更新
- [ ] 后端配置已更新
- [ ] 零地址随机探索测试通过
- [ ] 普通地址旅行功能正常
- [ ] 前后端整体功能验证

## 🚨 注意事项

1. **私钥安全**：部署完成后，建议移除 .env 文件中的私钥
2. **Gas 费用**：部署需要一定的 ZETA 代币，请确保账户余额充足
3. **网络配置**：确保使用正确的 RPC 端点
4. **权限设置**：部署后需要正确设置 TravelManager 权限

## 📞 获取测试代币

如果需要 ZETA 测试代币，可以通过以下方式：

1. 访问 [ZetaChain 测试网水龙头](https://zetachain.com/testnet-faucet)
2. 输入您的钱包地址
3. 领取测试代币

## 🔗 有用链接

- [ZetaChain Athens 浏览器](https://athens.explorer.zetachain.com/)
- [ZetaChain 文档](https://docs.zetachain.com/)
- [Hardhat 文档](https://hardhat.org/docs)