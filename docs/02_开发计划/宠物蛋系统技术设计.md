---
status: å·²å®¡æ ¸
version: 1.0
last_updated: 2026-02-06
reviewer: ç”¨æˆ·
---

# ZetaFrog 2.0 å® ç‰©è›‹ç³»ç»Ÿ - æŠ€æœ¯è®¾è®¡æ–‡æ¡£

## ä¸€ã€å†…éƒ¨è®¨è®ºè®°å½•

### è®¨è®ºä¸»é¢˜ï¼šæ•°æ®æ¨¡å‹ä¸çŠ¶æ€è®¡ç®—æ¶æ„

**æ¶æ„å¸ˆ**ï¼šé‡‡ç”¨æ··åˆæ¨¡å¼ - åç«¯å®šæ—¶ä»»åŠ¡å¤„ç†ä¸´ç•ŒçŠ¶æ€ï¼Œå‰ç«¯å®æ—¶è®¡ç®—å±•ç¤ºå€¼ã€‚Frog è¡¨ç›´æ¥æ‰©å±• 3 ä¸ªå­—æ®µï¼ˆcleanliness/health/energyï¼‰ï¼Œé¿å…æ–°å»ºå­è¡¨ã€‚

**DBA**ï¼šæ–°å¢å­—æ®µå¯¹ç°æœ‰ç´¢å¼•æ— å½±å“ï¼Œä½†éœ€è¦æ³¨æ„ï¼š

1. çŠ¶æ€æ›´æ–°é¢‘ç‡é«˜ï¼Œå»ºè®®ä½¿ç”¨æ‰¹é‡æ›´æ–°å‡å°‘ I/O
2. lastStatusUpdate å­—æ®µéœ€è¦ç´¢å¼•ï¼Œç”¨äºå®šæ—¶ä»»åŠ¡æŸ¥è¯¢

**åç«¯å¼€å‘**ï¼šå®šæ—¶ä»»åŠ¡æ¯ 5 åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡ï¼Œåªå¤„ç†ï¼š

1. æ£€æµ‹ç”Ÿç—…æ¡ä»¶ï¼ˆå¥åº·åº¦ < 15 æŒç»­ 2 å°æ—¶ï¼‰
2. è§¦å‘éšæœºæ’æ³„äº‹ä»¶
3. æ›´æ–°è¿›åŒ–æ¡ä»¶æ£€æµ‹

**å®‰å…¨å·¥ç¨‹å¸ˆ**ï¼š$LILY ä½œä¸ºé“¾ä¸‹è´§å¸ï¼Œéœ€é˜²æ­¢åˆ·å¸ï¼š

1. å°æ¸¸æˆå¥–åŠ±éœ€è¦åç«¯å‘æ”¾
2. ä½¿ç”¨ Redis è®°å½•æ¯æ—¥é™é¢
3. å–‚é£Ÿ/æ¸…æ´æ“ä½œéœ€è¦é˜²æŠ–

**æœ€ç»ˆå†³ç­–**ï¼š

1. æ‰©å±• Frog è¡¨ï¼Œæ–°å¢ cleanliness/health/energy/lastStatusUpdate/isSick/evolutionType
2. æ–°å¢ LilyBalance è¡¨è®°å½•è½¯è´§å¸ä½™é¢
3. åç«¯å®šæ—¶ä»»åŠ¡ä½¿ç”¨ node-cronï¼Œæ¯ 5 åˆ†é’Ÿæ‰§è¡Œ

---

## äºŒã€ä¸šåŠ¡æµç¨‹å›¾

### 2.1 çŠ¶æ€è¡°å‡ä¸æ¢å¤æµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    çŠ¶æ€è¡°å‡è®¡ç®—æµç¨‹                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚ ç”¨æˆ·ç™»å½• â”‚ â”€â”€â–¶ â”‚ å‰ç«¯è·å–é’è›™ â”‚ â”€â”€â–¶ â”‚ è®¡ç®—å®æ—¶çŠ¶æ€ â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                                              â”‚                  â”‚
â”‚                                              â–¼                  â”‚
â”‚                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚                         â”‚  currentValue = storedValue     â”‚     â”‚
â”‚                         â”‚    - (now - lastUpdate) * rate  â”‚     â”‚
â”‚                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                              â”‚                  â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚                    â–¼                         â–¼            â–¼    â”‚
â”‚             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚             â”‚ æ­£å¸¸æ˜¾ç¤º â”‚            â”‚ è­¦æˆ’æ˜¾ç¤º â”‚   â”‚ å±é™©   â”‚ â”‚
â”‚             â”‚   ç»¿è‰²   â”‚            â”‚   æ©™è‰²   â”‚   â”‚ çº¢é—ªçƒ â”‚ â”‚
â”‚             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 å–‚é£Ÿæ“ä½œæµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       å–‚é£Ÿæ“ä½œæµç¨‹                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚ ç‚¹å‡»å–‚é£Ÿ â”‚ â”€â”€â–¶ â”‚ æ‰“å¼€é£Ÿç‰©é¢æ¿ â”‚ â”€â”€â–¶ â”‚ é€‰æ‹©é£Ÿç‰©     â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                                              â”‚                  â”‚
â”‚                                              â–¼                  â”‚
â”‚                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚                         â”‚      POST /api/frog/feed       â”‚     â”‚
â”‚                         â”‚  { foodType, amount }          â”‚     â”‚
â”‚                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                              â”‚                  â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚                    â–¼                         â–¼            â–¼    â”‚
â”‚             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚             â”‚ ä½™é¢ä¸è¶³ â”‚            â”‚ æ‰£é™¤$LILYâ”‚   â”‚ æ›´æ–°   â”‚ â”‚
â”‚             â”‚ è¿”å›é”™è¯¯ â”‚            â”‚ æ›´æ–°çŠ¶æ€ â”‚   â”‚ å‰ç«¯UI â”‚ â”‚
â”‚             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.3 è¿›åŒ–æ£€æµ‹æµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       è¿›åŒ–æ£€æµ‹æµç¨‹                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                               â”‚
â”‚  â”‚ å®šæ—¶ä»»åŠ¡è§¦å‘ â”‚                                               â”‚
â”‚  â”‚ (æ¯5åˆ†é’Ÿ)    â”‚                                               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                               â”‚
â”‚         â”‚                                                       â”‚
â”‚         â–¼                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚ æŸ¥è¯¢æ‰€æœ‰ evolutionType = null ä¸” level >= 5 çš„é’è›™   â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚         â”‚                                                       â”‚
â”‚         â–¼                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ æ£€æŸ¥æ¢é™©å‹æ¡ä»¶ â”‚  â”‚ æ£€æŸ¥å­¦è€…å‹æ¡ä»¶ â”‚  â”‚ æ£€æŸ¥ç¤¾äº¤å‹æ¡ä»¶ â”‚    â”‚
â”‚  â”‚ æ—…è¡Œâ‰¥15æ¬¡     â”‚  â”‚ å¯¹è¯â‰¥30æ¬¡     â”‚  â”‚ å¥½å‹â‰¥5äºº      â”‚    â”‚
â”‚  â”‚ å¥åº·åº¦â‰¥70     â”‚  â”‚ æ—¥è®°â‰¥10ç¯‡     â”‚  â”‚ äº’åŠ¨â‰¥50æ¬¡     â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚         â”‚                   â”‚                   â”‚               â”‚
â”‚         â–¼                   â–¼                   â–¼               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚ æ»¡è¶³ä»»ä¸€æ¡ä»¶ â†’ æ ‡è®° canEvolve = true                 â”‚      â”‚
â”‚  â”‚ å‰ç«¯è½®è¯¢æ—¶è·å–åˆ°æ ‡è®° â†’ å¼¹å‡ºè¿›åŒ–æç¤º                   â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ä¸‰ã€æ•°æ®åº“å˜æ›´è®¾è®¡

### 3.1 Frog è¡¨æ‰©å±•

```prisma
model Frog {
  // ç°æœ‰å­—æ®µ...

  // ğŸ†• å…»æˆçŠ¶æ€æ‰©å±• (hunger/happiness å·²å­˜åœ¨)
  cleanliness      Int       @default(100)    // æ¸…æ´åº¦ 0-100
  health           Int       @default(100)    // å¥åº·åº¦ 0-100
  energy           Int       @default(100)    // æ´»åŠ›å€¼ 0-100
  lastStatusUpdate DateTime  @default(now())  // çŠ¶æ€è®¡ç®—åŸºå‡†æ—¶é—´

  // ğŸ†• ç”Ÿç—…çŠ¶æ€
  isSick           Boolean   @default(false)  // æ˜¯å¦ç”Ÿç—…
  sickSince        DateTime?                  // ç”Ÿç—…å¼€å§‹æ—¶é—´

  // ğŸ†• è¿›åŒ–ç³»ç»Ÿ
  evolutionType    String?                    // explorer/scholar/social
  canEvolve        Boolean   @default(false)  // æ˜¯å¦å¯ä»¥è¿›åŒ–
  evolvedAt        DateTime?                  // è¿›åŒ–æ—¶é—´
}
```

### 3.2 æ–°å¢ LilyBalance è¡¨

```prisma
model LilyBalance {
  id              Int       @id @default(autoincrement())
  ownerAddress    String    @unique
  balance         Int       @default(0)       // $LILY ä½™é¢
  totalEarned     Int       @default(0)       // ç´¯è®¡è·å¾—
  totalSpent      Int       @default(0)       // ç´¯è®¡æ¶ˆè´¹
  updatedAt       DateTime  @updatedAt

  // ä»Šæ—¥é™é¢è¿½è¸ª
  dailyGameEarned Int       @default(0)       // ä»Šæ—¥æ¸¸æˆè·å¾—
  dailyResetAt    DateTime  @default(now())   // æ¯æ—¥é‡ç½®æ—¶é—´

  @@index([ownerAddress])
}
```

### 3.3 æ–°å¢ LilyTransaction è¡¨

```prisma
model LilyTransaction {
  id              Int       @id @default(autoincrement())
  ownerAddress    String
  amount          Int                         // æ­£æ•°=æ”¶å…¥ï¼Œè´Ÿæ•°=æ”¯å‡º
  type            LilyTxType                  // äº¤æ˜“ç±»å‹
  description     String?                     // æè¿°
  createdAt       DateTime  @default(now())

  @@index([ownerAddress])
  @@index([type])
}

enum LilyTxType {
  GAME_REWARD     // æ¸¸æˆå¥–åŠ±
  FEED_COST       // å–‚é£Ÿæ¶ˆè€—
  CLEAN_REWARD    // æ¸…æ´å¥–åŠ±
  DAILY_SIGNIN    // æ¯æ—¥ç­¾åˆ°
  TRAVEL_REWARD   // æ—…è¡Œå¥–åŠ±
}
```

### 3.4 æ–°å¢ FoodInventory è¡¨æ‰©å±•

```prisma
// å·²å­˜åœ¨ FoodInventory è¡¨ï¼Œéœ€æ‰©å±•é£Ÿç‰©ç±»å‹
enum FoodType {
  BREAD           // é¢åŒ… - é¥±é£Ÿåº¦+15
  BUG_BENTO       // è™«å­ä¾¿å½“ - é¥±é£Ÿåº¦+25, æ´»åŠ›+5
  CAKE            // è›‹ç³• - å¹¸ç¦åº¦+20
  MEDICINE        // è¯æ°´ - å¥åº·åº¦+50
}
```

---

## å››ã€æ¥å£è®¾è®¡

### 4.1 çŠ¶æ€æŸ¥è¯¢æ¥å£

```
GET /api/frog/:frogId/status

Response:
{
  "hunger": 75,           // å®æ—¶è®¡ç®—å€¼
  "happiness": 68,
  "cleanliness": 85,
  "health": 92,
  "energy": 80,
  "isSick": false,
  "lastStatusUpdate": "2026-01-29T12:00:00Z",
  "warnings": ["hunger"],  // ä½äºè­¦æˆ’çº¿çš„å±æ€§
  "dangers": []            // ä½äºå±é™©çº¿çš„å±æ€§
}
```

### 4.2 å–‚é£Ÿæ¥å£

```
POST /api/frog/:frogId/feed
Body: { "foodType": "BREAD" }

Response:
{
  "success": true,
  "cost": 10,
  "newBalance": 1270,
  "effects": {
    "hunger": { "before": 50, "after": 65 }
  }
}
```

### 4.3 æ¸…æ´æ¥å£

```
POST /api/frog/:frogId/clean

Response:
{
  "success": true,
  "reward": 10,
  "newBalance": 1280,
  "effects": {
    "cleanliness": { "before": 40, "after": 100 }
  }
}
```

### 4.4 ç©è€æ¥å£ï¼ˆçŒœæ–¹å‘æ¸¸æˆï¼‰

```
POST /api/frog/:frogId/play/guess
Body: { "guess": "left" }

Response:
{
  "success": true,
  "correct": true,
  "reward": 25,
  "effects": {
    "happiness": { "before": 60, "after": 70 }
  },
  "dailyPlaysRemaining": 4
}
```

### 4.5 æ²»ç–—æ¥å£

```
POST /api/frog/:frogId/heal
Body: { "medicineType": "MEDICINE" }

Response:
{
  "success": true,
  "cost": 50,
  "effects": {
    "health": { "before": 10, "after": 60 },
    "isSick": { "before": true, "after": false }
  }
}
```

### 4.6 è¿›åŒ–æ¥å£

```
POST /api/frog/:frogId/evolve
Body: { "evolutionType": "explorer" }

Response:
{
  "success": true,
  "evolutionType": "explorer",
  "bonuses": {
    "travelReward": "+15%"
  }
}
```

---

## äº”ã€ä»£ç å˜æ›´æ¸…å•

### 5.1 åç«¯å˜æ›´

| ç±»å‹     | æ–‡ä»¶è·¯å¾„                              | è¯´æ˜                                              |
| -------- | ------------------------------------- | ------------------------------------------------- |
| [MODIFY] | `prisma/schema.prisma`                | æ‰©å±• Frog è¡¨ï¼Œæ–°å¢ LilyBalance/LilyTransaction è¡¨ |
| [NEW]    | `src/services/frog-status.service.ts` | çŠ¶æ€è®¡ç®—ã€è¡°å‡ã€æ¢å¤é€»è¾‘                          |
| [NEW]    | `src/services/lily.service.ts`        | $LILY è´§å¸ç®¡ç†                                    |
| [NEW]    | `src/services/evolution.service.ts`   | è¿›åŒ–æ¡ä»¶æ£€æµ‹ä¸æ‰§è¡Œ                                |
| [NEW]    | `src/routes/nurture.routes.ts`        | å–‚é£Ÿ/æ¸…æ´/ç©è€/æ²»ç–—è·¯ç”±                           |
| [NEW]    | `src/jobs/status-cron.job.ts`         | å®šæ—¶ä»»åŠ¡ï¼šçŠ¶æ€è¡°å‡ã€ç”Ÿç—…æ£€æµ‹ã€æ’æ³„äº‹ä»¶            |
| [MODIFY] | `src/services/travel.service.ts`      | æ—…è¡Œå‰ç½®æ£€æŸ¥ã€å½’æ¥ç»“ç®—                            |

### 5.2 å‰ç«¯å˜æ›´

| ç±»å‹     | æ–‡ä»¶è·¯å¾„                                 | è¯´æ˜                 |
| -------- | ---------------------------------------- | -------------------- |
| [NEW]    | `src/components/frog/StatusPanel.tsx`    | çŠ¶æ€é¢æ¿ç»„ä»¶         |
| [NEW]    | `src/components/frog/FeedModal.tsx`      | å–‚é£Ÿå¼¹çª—             |
| [NEW]    | `src/components/frog/CleanButton.tsx`    | æ¸…æ´æŒ‰é’®ï¼ˆå«ğŸ’©æç¤ºï¼‰ |
| [NEW]    | `src/components/game/GuessGame.tsx`      | çŒœæ–¹å‘å°æ¸¸æˆ         |
| [NEW]    | `src/components/frog/EvolutionModal.tsx` | è¿›åŒ–å¼¹çª—             |
| [NEW]    | `src/hooks/useFrogStatus.ts`             | çŠ¶æ€å®æ—¶è®¡ç®— Hook    |
| [NEW]    | `src/api/nurture.ts`                     | å…»æˆç›¸å…³ API è°ƒç”¨    |
| [MODIFY] | `src/pages/FrogDetail.tsx`               | é›†æˆçŠ¶æ€é¢æ¿         |
| [MODIFY] | `src/pages/Travel.tsx`                   | æ—…è¡Œå‰ç½®æ£€æŸ¥ UI      |

---

## å…­ã€éªŒè¯è®¡åˆ’

### 6.1 è‡ªåŠ¨åŒ–æµ‹è¯•

```bash
# åç«¯å•å…ƒæµ‹è¯•
cd backend
npm run test -- --grep "frog-status"
npm run test -- --grep "lily"
npm run test -- --grep "evolution"
```

### 6.2 æ‰‹åŠ¨éªŒè¯

| åœºæ™¯     | éªŒè¯æ­¥éª¤                                                  | é¢„æœŸç»“æœ            |
| -------- | --------------------------------------------------------- | ------------------- |
| çŠ¶æ€è¡°å‡ | 1. ç™»å½•åç­‰å¾… 10 åˆ†é’Ÿ<br>2. åˆ·æ–°é¡µé¢æŸ¥çœ‹çŠ¶æ€              | é¥±é£Ÿåº¦ä¸‹é™çº¦ 0.8 ç‚¹ |
| å–‚é£Ÿæ“ä½œ | 1. ç‚¹å‡»å–‚é£ŸæŒ‰é’®<br>2. é€‰æ‹©é¢åŒ…<br>3. ç¡®è®¤                 | é¥±é£Ÿåº¦+15ï¼Œ$LILY-10 |
| ç”Ÿç—…æ²»ç–— | 1. æ‰‹åŠ¨è®¾ç½®å¥åº·åº¦=10<br>2. ç­‰å¾… 2 å°æ—¶<br>3. è´­ä¹°è¯æ°´æ²»ç–— | é’è›™æ¢å¤æ­£å¸¸        |
| è¿›åŒ–è§¦å‘ | 1. æ»¡è¶³è¿›åŒ–æ¡ä»¶<br>2. åˆ·æ–°é¡µé¢                            | å¼¹å‡ºè¿›åŒ–æç¤º        |

---

## å˜æ›´è®°å½•

| æ—¥æœŸ       | å˜æ›´å†…å®¹           |
| ---------- | ------------------ |
| 2026-01-29 | åˆå§‹åŒ–æŠ€æœ¯è®¾è®¡æ–‡æ¡£ |
