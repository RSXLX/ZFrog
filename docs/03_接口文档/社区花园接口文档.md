---
status: 已审核
version: 1.0
last_updated: 2026-01-14
reviewer: AI (根据实际代码检查)
---

# 社区花园接口文档

## 一、接口概览

| 分类 | 接口 | 方法 | 路径 |
|------|------|------|------|
| 社区 | 公开社区列表 | GET | `/communities/public` |
| 社区 | 用户社区列表 | GET | `/communities/user/:address` |
| 社区 | 验证凭证 | POST | `/communities/verify-credential` |
| 社区 | 设置活跃社区 | POST | `/communities/set-active` |
| 社区 | 离开社区 | POST | `/communities/leave` |
| 社区 | 社区详情 | GET | `/communities/:id` |
| 社区 | 社区成员 | GET | `/communities/:id/members` |

---

## 二、社区接口

### 2.1 获取公开社区

```
GET /api/communities/public
```

**响应**

```json
{
  "success": true,
  "data": [
    {
      "id": "community_001",
      "name": "ZetaFrog 公共花园",
      "description": "所有人都可以加入的花园",
      "thumbnailUrl": "/images/garden.png",
      "memberCount": 156,
      "isPresent": true
    }
  ]
}
```

---

### 2.2 获取用户社区

```
GET /api/communities/user/:address
```

**路径参数**

| 参数 | 类型 | 说明 |
|------|------|------|
| address | string | 钱包地址 |

**响应**

```json
{
  "success": true,
  "data": [
    {
      "id": "community_001",
      "name": "ZetaFrog 公共花园",
      "isActive": true,
      "joinedAt": "2026-01-10T08:00:00.000Z"
    }
  ]
}
```

---

### 2.3 验证凭证加入

```
POST /api/communities/verify-credential
```

**请求体**

```json
{
  "credential": "INVITE_CODE_123",
  "userAddress": "0x..."
}
```

**响应**

```json
{
  "success": true,
  "message": "Successfully joined community",
  "communityId": "community_002"
}
```

---

### 2.4 设置活跃社区

```
POST /api/communities/set-active
```

**请求体**

```json
{
  "userAddress": "0x...",
  "communityId": "community_001"
}
```

---

### 2.5 离开社区

```
POST /api/communities/leave
```

**请求体**

```json
{
  "userAddress": "0x...",
  "communityId": "community_001"
}
```

---

### 2.6 获取社区详情

```
GET /api/communities/:id
```

**响应**

```json
{
  "success": true,
  "data": {
    "id": "community_001",
    "name": "ZetaFrog 公共花园",
    "description": "...",
    "thumbnailUrl": "...",
    "memberCount": 156,
    "requiredCredential": null
  }
}
```

---

### 2.7 获取社区成员

```
GET /api/communities/:id/members?limit=50
```

**响应**

```json
{
  "success": true,
  "data": [
    {
      "address": "0x...",
      "frogTokenId": 1,
      "frogName": "小蛙",
      "joinedAt": "2026-01-10T08:00:00.000Z"
    }
  ]
}
```

---

## 三、错误码

| HTTP | 说明 |
|------|------|
| 400 | 缺少必要参数 |
| 404 | 社区不存在 |
| 403 | 凭证验证失败 |
| 500 | 服务器内部错误 |

---

## 四、变更记录

| 日期 | 内容 |
|------|------|
| 2026-01-14 | 初始版本 |
