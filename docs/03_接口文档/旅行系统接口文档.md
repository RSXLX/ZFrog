---
status: å·²å®¡æ ¸
version: 2.0
last_updated: 2026-01-13
reviewer: AI (æ ¹æ®å®é™…ä»£ç æ£€æŸ¥)
---

# æ—…è¡Œç³»ç»Ÿæ¥å£æ–‡æ¡£

## ä¸€ã€æ¥å£æ¦‚è§ˆ

| åˆ†ç±» | æ¥å£ | æ–¹æ³• | è·¯å¾„ |
|------|------|------|------|
| æ—…è¡Œ | å‘èµ·æ—…è¡Œ | POST | `/api/travel/start` |
| æ—…è¡Œ | è·å–è¯¦æƒ… | GET | `/api/travel/:id` |
| æ—…è¡Œ | å†å²è®°å½• | GET | `/api/travel/history` |
| æ—…è¡Œ | ç»Ÿè®¡æ•°æ® | GET | `/api/travel/stats` |
| å¾½ç«  | æ‰€æœ‰å¾½ç«  | GET | `/api/badges` |
| å¾½ç«  | æˆ‘çš„å¾½ç«  | GET | `/api/badges/my` |
| è·¨é“¾ | å‘èµ·è·¨é“¾ | POST | `/api/cross-chain/travel/start` |
| è·¨é“¾ | è·¨é“¾çŠ¶æ€ | GET | `/api/cross-chain/travel/:id` |

---

## äºŒã€æ—…è¡Œæ¥å£

### 2.1 å‘èµ·æ—…è¡Œ

```
POST /api/travel/start
Authorization: Bearer <token>
```

**è¯·æ±‚ä½“**
```json
{
  "travelType": "RANDOM",
  "targetChain": "BSC_TESTNET",
  "targetAddress": "0x..."
}
```

| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| travelType | string | å¦ | `RANDOM`/`SPECIFIC`ï¼Œé»˜è®¤ RANDOM |
| targetChain | string | å¦ | `BSC_TESTNET`/`ETH_SEPOLIA`/`ZETACHAIN_ATHENS` |
| targetAddress | string | å¦ | 0x å¼€å¤´çš„ 42 ä½åœ°å€ |

**å“åº”**
```json
{
  "success": true,
  "data": {
    "travelId": "clx1234567890",
    "estimatedDuration": 120
  }
}
```

---

### 2.2 è·å–æ—…è¡Œè¯¦æƒ…

```
GET /api/travel/:id
```

**å“åº”ï¼ˆè¿›è¡Œä¸­ï¼‰**
```json
{
  "success": true,
  "data": {
    "status": "IN_PROGRESS",
    "progress": 45,
    "stage": "EXPLORING"
  }
}
```

**å“åº”ï¼ˆå·²å®Œæˆï¼‰**
```json
{
  "success": true,
  "data": {
    "status": "COMPLETED",
    "chain": "BSC_TESTNET",
    "exploredBlock": "12345678",
    "snapshot": {
      "address": "0x...",
      "nativeBalance": "1.234",
      "nativeSymbol": "tBNB",
      "txCount": 42,
      "discoveries": [...]
    },
    "diary": "ä»Šå¤©èƒŒç€å°ä¹¦åŒ…å»äº†...",
    "mood": "HAPPY",
    "souvenir": {
      "type": "postcard",
      "name": "æ—§æ˜ä¿¡ç‰‡",
      "rarity": 2,
      "emoji": "ğŸ“®"
    }
  }
}
```

---

### 2.3 è·å–æ—…è¡Œå†å²

```
GET /api/travel/history?limit=10&offset=0
```

**å“åº”**
```json
{
  "success": true,
  "data": {
    "travels": [...],
    "total": 15
  }
}
```

---

### 2.4 è·å–ç”¨æˆ·ç»Ÿè®¡

```
GET /api/travel/stats
```

**å“åº”**
```json
{
  "success": true,
  "data": {
    "totalTrips": 15,
    "bscTrips": 5,
    "ethTrips": 6,
    "zetaTrips": 4,
    "totalDiscoveries": 45,
    "rareFinds": 3
  }
}
```

---

## ä¸‰ã€å¾½ç« æ¥å£

### 3.1 è·å–æ‰€æœ‰å¾½ç« 

```
GET /api/badges
```

**å“åº”**
```json
{
  "success": true,
  "data": [
    {
      "code": "FIRST_TRIP",
      "name": "ç¬¬ä¸€æ¬¡å‡ºé—¨",
      "icon": "ğŸ’",
      "rarity": 1,
      "unlocked": true
    }
  ]
}
```

### 3.2 è·å–æˆ‘çš„å¾½ç« 

```
GET /api/badges/my
```

---

## å››ã€è·¨é“¾æ—…è¡Œæ¥å£

### 4.1 å‘èµ·è·¨é“¾æ—…è¡Œ

```
POST /api/cross-chain/travel/start
```

**è¯·æ±‚ä½“**
```json
{
  "tokenId": 1,
  "destChainId": 97
}
```

---

## äº”ã€WebSocket äº‹ä»¶

| äº‹ä»¶ | è¯´æ˜ |
|------|------|
| `travel:progress` | æ—…è¡Œè¿›åº¦æ›´æ–° |
| `travel:completed` | æ—…è¡Œå®Œæˆ |
| `travel:failed` | æ—…è¡Œå¤±è´¥ |
| `badge:unlocked` | å¾½ç« è§£é” |

---

## å…­ã€æ•°æ®ç±»å‹

### TravelStatus
`PENDING` | `IN_PROGRESS` | `COMPLETED` | `FAILED`

### TravelStage
`DEPARTING` | `TRAVELING` | `EXPLORING` | `RETURNING`

### DiaryMood
`HAPPY` | `CURIOUS` | `SURPRISED` | `PEACEFUL` | `EXCITED` | `SLEEPY`

### ChainType
`BSC_TESTNET` | `ETH_SEPOLIA` | `ZETACHAIN_ATHENS`

---

## ä¸ƒã€é”™è¯¯ç 

| code | HTTP | è¯´æ˜ |
|------|------|------|
| UNAUTHORIZED | 401 | æœªæˆæƒ |
| ALREADY_TRAVELING | 400 | é’è›™æ­£åœ¨æ—…è¡Œ |
| INSUFFICIENT_SUPPLIES | 400 | ç‰©èµ„ä¸è¶³ |
| INVALID_CHAIN | 400 | æ— æ•ˆçš„é“¾ |
| RPC_ERROR | 500 | é“¾ä¸Šè·å–å¤±è´¥ |

---

## å…«ã€å˜æ›´è®°å½•

| æ—¥æœŸ | å†…å®¹ |
|------|------|
| 2026-01-13 | åˆå§‹ç‰ˆæœ¬ |
