---
status: 已审核
version: 1.0
last_updated: 2026-01-14
reviewer: AI (根据实际代码检查)
---

# 社区花园模块规格

> 本文档定义社区花园模块的技术规格和实现约定。

---

## 一、模块概述

社区花园是公共社交空间，玩家可以在这里放置青蛙与其他玩家互动。

| 属性 | 值 |
|------|------|
| 模块名称 | 社区花园 (Community Garden) |
| 依赖模块 | 青蛙NFT系统、好友系统 |
| 技术栈 | Node.js + TypeScript + WebSocket |

---

## 二、核心功能

| 功能点 | 说明 | 状态 |
|--------|------|------|
| 公开社区 | 获取公开社区列表 | ✅ |
| 凭证加入 | 验证凭证加入私有社区 | ✅ |
| 社区切换 | 设置/切换活跃社区 | ✅ |
| 成员列表 | 查看社区成员 | ✅ |
| 实时互动 | WebSocket 实时更新 | ✅ |

---

## 三、社区类型

| 类型 | 说明 | 加入方式 |
|------|------|----------|
| 公开 | 任何人可加入 | 直接加入 |
| 邀请制 | 需要邀请码 | 验证凭证 |
| NFT门控 | 需要持有特定NFT | 验证持仓 |

---

## 四、数据规格

### 4.1 社区数据

| 字段 | 类型 | 说明 |
|------|------|------|
| id | String | 社区 ID |
| name | String | 社区名称 |
| description | String | 描述 |
| thumbnailUrl | String | 缩略图 |
| isPresent | Boolean | 是否公开 |
| requiredCredential | String | 所需凭证 |
| memberCount | Int | 成员数量 |

---

## 五、接口约定

### 5.1 路由前缀

| 模块 | 前缀 |
|------|------|
| 社区 | `/api/communities` |

---

## 六、WebSocket 事件

| 事件 | 说明 |
|------|------|
| `garden:frog:enter` | 青蛙进入 |
| `garden:frog:move` | 青蛙移动 |
| `garden:frog:leave` | 青蛙离开 |
| `garden:interact` | 互动事件 |

---

## 七、代码实现

### 7.1 后端文件

| 文件 | 行数 | 说明 |
|------|------|------|
| `community.routes.ts` | 142 | API 路由 |
| `community.service.ts` | ~200 | 社区服务 |

### 7.2 前端组件

| 组件 | 说明 |
|------|------|
| `GardenPage.tsx` | 花园页面 (21KB) |
| `useGardenWebSocket.ts` | WebSocket Hook |
| `useGardenFrogMovement.ts` | 青蛙移动逻辑 |

---

## 八、变更记录

| 日期 | 版本 | 内容 |
|------|------|------|
| 2026-01-14 | 1.0 | 初始模块规格 |

---
