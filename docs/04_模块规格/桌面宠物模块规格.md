---
status: 已审核
version: 1.0
last_updated: 2026-01-14
reviewer: AI (根据实际代码检查)
---

# 桌面宠物模块规格

> 本文档定义桌面宠物模块的技术规格和实现约定。

---

## 一、模块概述

桌面宠物是 ZetaFrog 的特色功能，使用 Python + PyQt 实现跨平台桌面应用。

| 属性 | 值 |
|------|------|
| 模块名称 | 桌面宠物 (Desktop Pet) |
| 技术栈 | Python 3.9+ / PyQt6 |
| 依赖模块 | 后端API、WalletConnect |
| 平台支持 | Windows / macOS / Linux |

---

## 二、核心功能

### 2.1 宠物显示

| 功能点 | 说明 | 状态 |
|--------|------|------|
| 透明窗口 | 无边框透明背景 | ✅ |
| 动画播放 | 多种动画状态 | ✅ |
| 拖拽移动 | 任意位置放置 | ✅ |
| 置顶显示 | 始终在最上层 | ✅ |
| 点击交互 | 触发对话/菜单 | ✅ |

### 2.2 钱包功能

| 功能点 | 说明 | 状态 |
|--------|------|------|
| WalletConnect | 扫码连接钱包 | ✅ |
| 签名请求 | 消息签名 | ✅ |
| 交易发送 | 合约交互 | ✅ |

### 2.3 系统托盘

| 功能点 | 说明 | 状态 |
|--------|------|------|
| 托盘图标 | 系统托盘显示 | ✅ |
| 右键菜单 | 快捷操作 | ✅ |
| 通知弹窗 | 系统通知 | ✅ |

---

## 三、动画状态

| 状态 | 说明 | 触发条件 |
|------|------|----------|
| idle | 待机 | 默认状态 |
| happy | 开心 | 收到礼物/完成旅行 |
| sleeping | 睡觉 | 长时间无互动 |
| eating | 进食 | 喂食操作 |
| traveling | 旅行中 | 旅行期间 |
| waving | 挥手 | 点击互动 |

---

## 四、目录结构

| 目录/文件 | 说明 |
|-----------|------|
| `main.py` | 入口文件 |
| `config.py` | 配置文件 |
| `requirements.txt` | Python依赖 |
| `ui/` | UI组件 (36个文件) |
| `services/` | 服务层 (8个文件) |
| `models/` | 数据模型 |
| `assets/` | 资源文件 |

---

## 五、依赖清单

```txt
PyQt6>=6.4.0
aiohttp>=3.8.0
websockets>=10.0
walletconnect-python>=0.2.0
qrcode>=7.0
```

---

## 六、配置项

| 配置项 | 默认值 | 说明 |
|--------|--------|------|
| API_BASE_URL | http://localhost:3001/api | 后端API地址 |
| WS_URL | ws://localhost:3001 | WebSocket地址 |
| WC_PROJECT_ID | - | WalletConnect项目ID |
| CACHE_DIR | ~/.zetafrog | 本地缓存目录 |
| AUTO_START | false | 开机自启动 |
| STAY_ON_TOP | true | 始终置顶 |

---

## 七、系统要求

| 要求 | 规格 |
|------|------|
| 操作系统 | Windows 10+ / macOS 10.14+ / Ubuntu 20.04+ |
| Python | 3.9+ |
| 内存 | ≥ 100MB |
| 分辨率 | 支持高DPI |

---

## 八、离线模式

| 场景 | 处理方式 |
|------|----------|
| 网络断开 | 使用本地缓存数据 |
| API不可用 | 显示离线状态图标 |
| WebSocket断开 | 自动重连 |
| 钱包断开 | 提示重新连接 |

---

## 九、代码统计

| 目录 | 文件数 | 说明 |
|------|--------|------|
| ui/ | 36 | UI组件 |
| services/ | 8 | 服务层 |
| 总计 | ~50 | 完整应用 |

---

## 十、变更记录

| 日期 | 版本 | 内容 |
|------|------|------|
| 2026-01-14 | 1.0 | 初始模块规格 |

---
