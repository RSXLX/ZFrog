# 🏠 ZetaFrog 家园系统 - 网页端需求设计

## 一、系统定位

家园系统是 ZetaFrog 网页端的核心社交模块。用户拥有一个可视化的虚拟家园，好友的青蛙可以来做客、互动、留言，形成高频的社交粘性。

---

## 二、页面架构总览

### 2.1 网页端页面结构

```
ZetaFrog 网页应用
│
├── 首页 /home
│   └── 包含一只可在页面内移动的小青蛙（我的青蛙）
│   └── 有访客时，访客青蛙也在页面内移动
│
├── 我的青蛙 /my-frogs
│   └── 青蛙列表与详情
│
├── 旅行 /travel
│   └── 跨链旅行功能
│
├── 好友系统 /friends
│   ├── 好友列表 /friends/list
│   └── 家园页面 /friends/garden  ← 新增核心页面
│
└── 其他页面...
```

### 2.2 青蛙显示规则

| 页面 | 我的青蛙 | 访客青蛙 | 说明 |
|------|----------|----------|------|
| 首页 | ✅ 显示，可移动 | ✅ 显示，可移动 | 日常陪伴模式 |
| 我的青蛙 | ❌ 隐藏 | ❌ 隐藏 | 专注管理 |
| 旅行页面 | ❌ 隐藏 | ❌ 隐藏 | 专注旅行 |
| 好友列表 | ❌ 隐藏 | ❌ 隐藏 | 专注社交管理 |
| **家园页面** | ✅ 在家园内 | ✅ 在家园内 | **专注互动** |

**核心逻辑**：进入家园页面时，首页的移动小青蛙隐藏，所有青蛙都在家园场景内活动和互动。

---

## 三、首页青蛙（日常陪伴模式）

### 3.1 基本表现

**我的青蛙：**
- 以小尺寸精灵形态显示在页面上
- 可以在页面可视区域内自由移动（自动巡逻）
- 用户可以拖拽移动青蛙位置
- 点击青蛙弹出快捷菜单

**访客青蛙（有好友来访时）：**
- 同样以小尺寸精灵显示
- 在页面内随机移动
- 头顶显示来访好友标识
- 点击弹出简要信息和快捷操作

### 3.2 首页青蛙快捷菜单

**点击我的青蛙：**
```
┌─────────────────┐
│ 😊 心情：开心    │
│ 🍎 饱食度：80%   │
├─────────────────┤
│ 🏠 进入家园     │
│ ✈️ 去旅行       │
│ 👀 查看详情     │
└─────────────────┘
```

**点击访客青蛙：**
```
┌─────────────────────┐
│ 🐸 哲学蛙 #42       │
│ 👤 来自：小明       │
│ ⏰ 已做客：15分钟   │
├─────────────────────┤
│ ❤️ 点赞            │
│ 🏠 去家园互动       │
│ ℹ️ 查看详情        │
└─────────────────────┘
```

### 3.3 访客到达通知

当有新访客时，页面右下角弹出通知：

```
┌──────────────────────────────────┐
│ 🐸 新访客到达！                  │
│                                  │
│ 小明的青蛙【哲学蛙#42】来做客啦  │
│                                  │
│  [去家园看看]    [稍后]          │
└──────────────────────────────────┘
```

---

## 四、家园页面详细设计（/friends/garden）

### 4.1 页面布局

```
┌─────────────────────────────────────────────────────────────────┐
│  ← 返回好友列表          我的家园           ⚙️ 设置  ✏️ 编辑   │
├─────────────────────────────────────────────────────────────┬───┤
│                                                             │   │
│                                                             │ 访│
│                    ┌─────────────────────┐                  │ 客│
│                    │                     │                  │ 列│
│                    │                     │                  │ 表│
│                    │    家 园 场 景      │                  │   │
│                    │                     │                  │   │
│                    │   🐸    🐸   🐸    │                  │ 📋│
│                    │  (我)  (客1) (客2)  │                  │   │
│                    │                     │                  │   │
│                    └─────────────────────┘                  │   │
│                                                             │   │
├─────────────────────────────────────────────────────────────┴───┤
│   📬 留言板(12)  │  🎁 礼物盒(3)  │  📸 相册(28)  │  🏆 成就    │
└─────────────────────────────────────────────────────────────────┘
```

**区域说明：**

| 区域 | 功能 |
|------|------|
| 顶部导航栏 | 返回、标题、设置、编辑模式切换 |
| 中央家园场景 | 主要交互区域，展示青蛙和装饰 |
| 右侧访客列表 | 当前访客、等待中的访客、历史记录 |
| 底部功能标签 | 留言板、礼物盒、相册、成就 |

### 4.2 家园场景区域

**场景构成：**
- **背景层**：可更换的主题背景（池塘、草地、夜空、雪地等）
- **装饰层**：用户摆放的家具和装饰物
- **青蛙层**：我的青蛙 + 访客青蛙
- **特效层**：互动特效（爱心、星星、气泡等）
- **UI层**：点击弹出的互动面板

**场景尺寸：**
- 固定比例（如 16:9）
- 响应式缩放适配不同屏幕
- 移动端可左右滑动查看完整场景

### 4.3 青蛙在家园内的表现

**我的青蛙（主人）：**
- 显示在家园中央偏左位置
- 自动进行待机动画（眨眼、轻微晃动）
- 会自动走向新到达的访客打招呼
- 点击可查看状态，但不可拖动

**访客青蛙：**
- 从家园入口（门/小路）进入
- 在家园内随机移动探索
- 会与装饰物互动（跳上荷叶、闻花香）
- 点击弹出互动面板

**青蛙移动逻辑：**
- 每隔几秒随机选择一个目标点移动
- 移动采用蹦跳动画
- 到达目标点后随机播放一个待机动作
- 避免多只青蛙重叠

---

## 五、访客列表侧边栏

### 5.1 列表结构

```
┌─────────────────────┐
│ 👥 当前访客 (2)     │
├─────────────────────┤
│ ┌─────────────────┐ │
│ │ 🐸 哲学蛙#42    │ │
│ │ 来自：小明      │ │
│ │ ⏰ 25分钟       │ │
│ │ [❤️] [🍎] [👁️] │ │
│ └─────────────────┘ │
│ ┌─────────────────┐ │
│ │ 🐸 旅行蛙#18    │ │
│ │ 来自：小红      │ │
│ │ ⏰ 10分钟       │ │
│ │ [❤️] [🍎] [👁️] │ │
│ └─────────────────┘ │
├─────────────────────┤
│ 📨 访问请求 (1)     │
├─────────────────────┤
│ ┌─────────────────┐ │
│ │ 🐸 冒险蛙#99    │ │
│ │ 来自：小刚      │ │
│ │ [✅接受] [❌拒绝]│ │
│ └─────────────────┘ │
├─────────────────────┤
│ 📜 今日来访 (5)     │
│ > 点击展开历史记录  │
└─────────────────────┘
```

### 5.2 访客卡片操作

| 按钮 | 功能 | 说明 |
|------|------|------|
| ❤️ | 快捷点赞 | 不弹面板，直接点赞 |
| 🍎 | 快捷喂食 | 弹出食物选择 |
| 👁️ | 定位查看 | 镜头移动到该青蛙 |

---

## 六、访客互动系统

### 6.1 互动面板

点击家园场景内的访客青蛙，弹出互动面板：

```
┌─────────────────────────────────────────┐
│           ┌───────┐                     │
│           │ 青蛙  │  哲学蛙 #42         │
│           │ 头像  │  来自：小明          │
│           └───────┘  已做客：25 分钟     │
│                      状态：正在闲逛 🚶    │
├─────────────────────────────────────────┤
│                                         │
│  ┌─────┐  ┌─────┐  ┌─────┐  ┌─────┐   │
│  │ ❤️  │  │ 🍎  │  │ 🎁  │  │ 📸  │   │
│  │点赞 │  │喂食 │  │送礼 │  │合影 │   │
│  └─────┘  └─────┘  └─────┘  └─────┘   │
│                                         │
│  ┌─────┐  ┌─────┐                      │
│  │ 💬  │  │ 👋  │                      │
│  │留言 │  │送客 │                      │
│  └─────┘  └─────┘                      │
│                                         │
├─────────────────────────────────────────┤
│  💕 友好度：████████░░ Lv.3 (680/1000)  │
└─────────────────────────────────────────┘
```

### 6.2 互动详细流程

#### ❤️ 点赞

**流程：**
1. 点击点赞按钮
2. 我的青蛙转向访客青蛙
3. 我的青蛙做出点赞手势
4. 访客青蛙头顶飘出爱心 ❤️
5. 显示 "+5 友好度" 飘字动画
6. 好友收到通知："XX 给你的青蛙点了赞"

**限制**：每只访客每天可点赞 3 次

**冷却提示**：已达上限时按钮置灰，显示"明天再来~"

---

#### 🍎 喂食

**流程：**
1. 点击喂食按钮
2. 弹出食物选择面板：

```
┌─────────────────────────────────┐
│ 选择食物                   ✕   │
├─────────────────────────────────┤
│ ┌─────┐ 普通虫子               │
│ │ 🐛  │ +10 友好度             │
│ │x12  │ 库存：12               │
│ └─────┘                        │
│ ┌─────┐ 美味果子               │
│ │ 🍇  │ +20 友好度             │
│ │ x5  │ 库存：5                │
│ └─────┘                        │
│ ┌─────┐ 高级甜点               │
│ │ 🍰  │ +50 友好度             │
│ │ x2  │ 库存：2                │
│ └─────┘                        │
└─────────────────────────────────┘
```

3. 选择食物后确认
4. 食物从屏幕飞向访客青蛙
5. 访客青蛙播放进食动画
6. 访客青蛙表情变为满足 😋
7. 显示 "+20 友好度" 飘字
8. 好友收到通知

**额外效果**：
- 喂食后访客停留时间延长 10 分钟
- 连续喂食 3 次触发"吃撑了"彩蛋动画

---

#### 🎁 送礼物

**流程：**
1. 点击送礼按钮
2. 弹出礼物选择面板：

```
┌─────────────────────────────────┐
│ 选择礼物                   ✕   │
├─────────────────────────────────┤
│ ┌─────┐ 小花束                 │
│ │ 💐  │ +30 友好度             │
│ │ x3  │                        │
│ └─────┘                        │
│ ┌─────┐ 幸运四叶草              │
│ │ 🍀  │ +50 友好度             │
│ │ x1  │ 可能触发惊喜！          │
│ └─────┘                        │
│ ┌─────┐ 金色铃铛 ⭐稀有        │
│ │ 🔔  │ +100 友好度            │
│ │ x1  │                        │
│ └─────┘                        │
└─────────────────────────────────┘
```

3. 选择礼物确认
4. 礼物盒出现在访客青蛙面前
5. 访客青蛙打开礼物，惊喜表情 + 闪光特效
6. 显示 "+50 友好度" 飘字
7. 礼物悬挂在访客青蛙身边（视觉标记）
8. 好友收到通知并获得礼物

---

#### 📸 合影

**流程：**
1. 点击合影按钮
2. 我的青蛙走向访客青蛙
3. 进入合影模式：

```
┌─────────────────────────────────────┐
│            📸 合影模式              │
├─────────────────────────────────────┤
│   ┌───────────────────────────┐     │
│   │                           │     │
│   │      🐸    🐸             │     │
│   │     (我)  (客)            │     │
│   │                           │     │
│   └───────────────────────────┘     │
├─────────────────────────────────────┤
│  姿势：[普通] [比心] [搞怪] [拥抱]  │
├─────────────────────────────────────┤
│        [📷 拍摄]    [取消]          │
└─────────────────────────────────────┘
```

4. 选择姿势后点击拍摄
5. 闪光灯特效
6. 生成合影图片预览
7. 可选择保存到相册或分享
8. 双方都获得这张合影

---

#### 💬 留言

**流程：**
1. 点击留言按钮
2. 弹出留言面板：

```
┌─────────────────────────────────────┐
│ 给访客留言                     ✕   │
├─────────────────────────────────────┤
│ 快捷留言：                          │
│ [欢迎来玩！🎉] [你家蛙真可爱~]     │
│ [常来坐坐！]   [招待不周请见谅]     │
├─────────────────────────────────────┤
│ 自定义留言：                        │
│ ┌─────────────────────────────────┐ │
│ │                                 │ │
│ │                                 │ │
│ └─────────────────────────────────┘ │
│                    0/50             │
├─────────────────────────────────────┤
│              [发送留言]             │
└─────────────────────────────────────┘
```

3. 选择快捷留言或输入自定义内容
4. 发送后，留言气泡出现在我的青蛙头顶
5. 访客青蛙做出"收到"的点头动作
6. 留言记录保存，好友可在留言板看到

---

#### 👋 送客

**流程：**
1. 点击送客按钮
2. 弹出确认框："确定让哲学蛙#42 现在离开吗？"
3. 确认后，我的青蛙走向访客
4. 两只青蛙挥手告别
5. 访客青蛙跳向家园出口
6. 播放离开动画（跳出画面或渐隐）
7. 访客从列表移除
8. 留言板自动添加 AI 生成的告别语

---

## 七、访客来访完整流程

### 7.1 好友青蛙来我家

```
好友在他的页面点击"派青蛙去做客"
           ↓
选择要拜访的好友（我）
           ↓
可选携带礼物
           ↓
发送访问请求
           ↓
━━━━━━━━━━━━━━━━━━━━━━━━━
           ↓
我收到 WebSocket 推送通知
           ↓
┌─ 如果我在首页：右下角弹出通知
└─ 如果我在家园：访客列表显示新请求
           ↓
┌─ 自动接受（已设置）→ 直接进入
└─ 手动接受 → 点击接受按钮
           ↓
访客青蛙进入家园
  - 首页模式：青蛙出现在页面
  - 家园模式：青蛙从入口跳入
           ↓
访客青蛙在家园内活动
           ↓
我可以进行各种互动
           ↓
访客自然离开 或 被送客
           ↓
留言板新增访客留言（AI 生成）
           ↓
好友收到青蛙归来通知
```

### 7.2 我派青蛙去好友家

```
进入好友列表页面
           ↓
选择一个在线好友
           ↓
点击"派青蛙去做客"
           ↓
弹出确认面板：
  - 显示好友信息
  - 可选携带礼物
           ↓
确认出发
           ↓
我的青蛙从首页消失（去做客中）
           ↓
等待好友接受
           ↓
━━━━━━━━━━━━━━━━━━━━━━━━━
           ↓
好友接受后，收到通知"你的青蛙已到达！"
           ↓
做客期间：
  - 我的青蛙不在我的页面
  - 可在好友列表查看状态
           ↓
做客结束（自然结束 或 好友送客）
           ↓
收到通知"你的青蛙回来了！"
           ↓
如果收到好友的喂食/礼物，显示奖励
           ↓
我的青蛙恢复显示
```

---

## 八、通知系统

### 8.1 通知类型与展示

| 事件 | 通知文案 | 展示方式 |
|------|----------|----------|
| 访问请求 | "小明的青蛙想来做客" | 弹窗 + 操作按钮 |
| 访客到达 | "哲学蛙#42 来到了你的家" | Toast 提示 |
| 收到点赞 | "小明给你的青蛙点了赞" | 通知中心 |
| 收到喂食 | "小明给你的青蛙喂了美味果子" | 通知中心 |
| 收到礼物 | "小明送给你一个幸运草！" | 弹窗 + 领取 |
| 访客离开 | "哲学蛙#42 离开了" | Toast 提示 |
| 青蛙归来 | "你的青蛙从小明家回来了" | 弹窗 + 查看奖励 |

### 8.2 通知设置选项

用户可在设置中配置：
- 是否自动接受好友访问
- 是否显示访客到达通知
- 是否开启声音提示
- 免打扰时段

---

## 九、留言板功能

### 9.1 留言板页面

```
┌─────────────────────────────────────────┐
│  📬 留言板                    筛选 ▼   │
├─────────────────────────────────────────┤
│  ┌─────────────────────────────────┐   │
│  │ 🐸 哲学蛙#42  来自：小明         │   │
│  │ 📅 今天 14:30  做客时长：45分钟  │   │
│  │ ─────────────────────────────── │   │
│  │ "你家的荷叶床好舒服，睡了一个    │   │
│  │  美美的午觉！下次我还要来~"      │   │
│  │ ─────────────────────────────── │   │
│  │ 🎁 带来了：幸运草               │   │
│  │              [❤️ 12]  [💬 回复] │   │
│  └─────────────────────────────────┘   │
│                                         │
│  ┌─────────────────────────────────┐   │
│  │ 🐸 旅行蛙#18  来自：小红         │   │
│  │ 📅 昨天 09:15  做客时长：30分钟  │   │
│  │ ─────────────────────────────── │   │
│  │ "这里的风景真不错，在草地上      │   │
│  │  跳了好久，腿都酸了哈哈~"        │   │
│  │              [❤️ 8]   [💬 回复] │   │
│  └─────────────────────────────────┘   │
│                                         │
│            加载更多...                   │
└─────────────────────────────────────────┘
```

### 9.2 筛选选项

- 全部留言
- 带礼物的
- 今日来访
- 本周来访
- 特定好友

---

## 十、家园装饰系统

### 10.1 编辑模式

点击顶部"编辑"按钮进入：

```
┌─────────────────────────────────────────────────────────────────┐
│  ← 退出编辑          编辑家园           [保存]  [重置]         │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│   ┌─────────────────────────────────────────────────────────┐   │
│   │  ┌───┬───┬───┬───┬───┬───┬───┬───┬───┬───┐            │   │
│   │  ├───┼───┼───┼───┼───┼───┼───┼───┼───┼───┤            │   │
│   │  ├───┼───┼───┼───┼───┼───┼───┼───┼───┼───┤  网格显示  │   │
│   │  ├───┼───┼───┼───┼───┼───┼───┼───┼───┼───┤            │   │
│   │  └───┴───┴───┴───┴───┴───┴───┴───┴───┴───┘            │   │
│   └─────────────────────────────────────────────────────────┘   │
│                                                                 │
├─────────────────────────────────────────────────────────────────┤
│  背景 │ 家具 │ 植物 │ 纪念品 │ 特殊                            │
├─────────────────────────────────────────────────────────────────┤
│  ┌────┐ ┌────┐ ┌────┐ ┌────┐ ┌────┐ ┌────┐                    │
│  │荷叶│ │蘑菇│ │石凳│ │花朵│ │...│ │...│   ← 拖拽放置        │
│  │ 床 │ │ 桌 │ │    │ │    │ │   │ │   │                      │
│  └────┘ └────┘ └────┘ └────┘ └────┘ └────┘                    │
└─────────────────────────────────────────────────────────────────┘
```

### 10.2 编辑操作

| 操作 | 方式 |
|------|------|
| 放置物品 | 从底部物品栏拖拽到场景 |
| 移动物品 | 拖拽场景中的物品 |
| 旋转物品 | 选中后点击旋转按钮 |
| 收回物品 | 选中后点击收回按钮 |
| 删除物品 | 选中后拖到删除区域 |
| 更换背景 | 点击背景标签选择主题 |

### 10.3 装饰物来源

| 来源 | 说明 |
|------|------|
| 默认提供 | 新用户赠送基础装饰 |
| 商店购买 | 使用游戏内货币购买 |
| 旅行纪念品 | 跨链旅行带回的 NFT |
| 成就奖励 | 达成特定成就解锁 |
| 活动限定 | 节日活动获取 |

---

## 十一、友好度系统

### 11.1 友好度机制

- 每对好友之间有独立的友好度数值
- 通过互访、互动增加友好度
- 友好度分等级，解锁不同权益

### 11.2 友好度等级

| 等级 | 所需友好度 | 名称 | 解锁内容 |
|------|------------|------|----------|
| Lv.1 | 0 | 初识 | 基础互动 |
| Lv.2 | 200 | 熟人 | 解锁合影功能 |
| Lv.3 | 500 | 好友 | 解锁特殊留言框 |
| Lv.4 | 1000 | 挚友 | 解锁专属表情 |
| Lv.5 | 2000 | 至交 | 解锁限定装饰 |

### 11.3 友好度获取

| 行为 | 获得友好度 |
|------|------------|
| 访问好友家 | +10 |
| 被好友访问 | +10 |
| 点赞 | +5 |
| 普通喂食 | +10 |
| 高级喂食 | +20~50 |
| 送普通礼物 | +30 |
| 送稀有礼物 | +50~100 |
| 合影 | +15 |
| 留言 | +5 |

---

## 十二、页面状态管理

### 12.1 全局状态

| 状态 | 说明 |
|------|------|
| 当前页面 | 控制青蛙显示/隐藏 |
| 我的青蛙列表 | 包含位置、状态、是否外出 |
| 当前访客列表 | 所有在访的好友青蛙 |
| 待处理请求 | 等待接受的访问请求 |
| 家园数据 | 布局、装饰物、背景 |
| 通知队列 | 待显示的通知 |

### 12.2 页面切换逻辑

```
监听路由变化
       ↓
判断目标页面
       ↓
┌─ /home（首页）
│    → 显示青蛙层
│    → 青蛙进入"日常模式"
│
├─ /friends/garden（家园）
│    → 隐藏首页青蛙层
│    → 家园场景内渲染青蛙
│    → 青蛙进入"家园模式"
│
└─ 其他页面
     → 隐藏青蛙层
     → 后台保持访客状态
```

---

## 十三、响应式设计

### 13.1 桌面端布局（≥1024px）

- 完整三栏布局：场景 + 侧边栏
- 底部功能标签横向排列
- 互动面板悬浮在青蛙旁边

### 13.2 平板端布局（768px - 1023px）

- 侧边栏可收起
- 点击按钮展开访客列表
- 场景适当缩小

### 13.3 移动端布局（<768px）

- 场景占满宽度，可左右滑动
- 访客列表变为底部抽屉
- 互动面板变为全屏弹窗
- 底部功能改为图标导航

---

## 十四、动画与特效清单

### 14.1 青蛙动画

| 动画名称 | 触发场景 |
|----------|----------|
| 待机呼吸 | 无操作时 |
| 蹦跳移动 | 移动时 |
| 歪头好奇 | 发现新事物 |
| 开心跳跃 | 被点赞、收到礼物 |
| 进食咀嚼 | 被喂食 |
| 满足拍肚 | 吃饱后 |
| 打哈欠 | 停留较久 |
| 趴下睡觉 | 困倦时 |
| 挥手告别 | 离开时 |
| 惊喜 | 收到礼物时 |

### 14.2 特效动画

| 特效 | 触发场景 |
|------|----------|
| 爱心飘起 | 点赞 |
| 星星闪烁 | 送礼物 |
| 食物飞入 | 喂食 |
| 闪光灯 | 合影 |
| 气泡对话 | 留言 |
| 欢迎彩带 | 访客进入 |
| 挥手告别 | 访客离开 |

---

## 十五、MVP 功能范围

### 必须实现（P0）

1. ✅ 首页青蛙显示与基础移动
2. ✅ 访客青蛙在首页显示
3. ✅ 家园页面场景渲染
4. ✅ 家园内青蛙显示与移动
5. ✅ 页面切换时青蛙隐藏/显示
6. ✅ 访客来访完整流程
7. ✅ 基础互动（点赞）
8. ✅ 访客列表
9. ✅ 实时通知

### 优先实现（P1）

- 🔜 喂食功能
- 🔜 送礼物功能
- 🔜 留言板
- 🔜 友好度系统

### 后续迭代（P2）

- 📅 合影功能
- 📅 家园装饰编辑
- 📅 纪念品展示
- 📅 成就系统
- 📅 排行榜
