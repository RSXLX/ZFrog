# ZetaFrog 桌面宠物 - 动画与业务需求分析

## 1. 桌面宠物窗口设计

### 窗口模式
- **迷你宠物** 150x150px - 仅青蛙，日常待机
- **带小窝** 300x250px - 青蛙+背景，在家状态  
- **旅行明信片** 350x200px - 风景+青蛙，旅行中展示

---

## 2. 青蛙状态与动画

### 基础状态
| 状态 | 动画描述 | 触发条件 |
|------|---------|---------|
| IDLE | 呼吸+眨眼 | 默认 |
| SLEEPING | ZZZ气泡 | 夜间/无互动 |
| EATING | 咀嚼动作 | 被喂食 |
| JUMPING | 上下弹跳 | 点击/开心 |

### 旅行状态
| 状态 | 动画描述 | 触发条件 |
|------|---------|---------|
| TRAVELING | 背包🎒+挥手 | 开始旅行 |
| RETURNING | 带礼物🎁回来 | 旅行结束 |
| WRITING | 拿笔✏️写字 | 生成日记 |

### 链上反应
| 状态 | 粒子 | 触发 |
|------|------|------|
| EXCITED | ⭐ | 大单买入 |
| SCARED | 💦 | 大单卖出 |
| RICH | 💰 | 巨鲸交易 |
| DANCING | 🔥 | 涨20%+ |
| CRYING | 💧 | 跌20%+ |

---

## 3. 家（小窝）场景设计

```
┌────────────────────────────────────┐
│           天气 ☀️/🌧️              │
├────────────────────────────────────┤
│   🗺️地图      📫邮箱              │
│                                    │
│      🪴        🐸                  │
│     植物      青蛙                 │
│                                    │
│   [🍀] [🥪] [🎒]                  │ ← 道具栏
│                                    │
│   ════════════════════════════     │
│   纪念品展示区 🎁🏆🎨             │
└────────────────────────────────────┘
```

### 互动元素
- 📫邮箱 → 查看日记
- 🎒背包 → 准备旅行
- 🗺️地图 → 选择目的地链

### 天气系统(基于Gas)
- Gas<20 → ☀️晴天
- Gas 20-50 → ⛅多云  
- Gas 50-100 → 🌧️下雨
- Gas>100 → ⛈️暴风雨

---

## 4. 旅行动画系统

### 出发动画 (3秒)
1. 站起来 (0.5s)
2. 背上背包 (0.5s)
3. 挥手"出发啦！" (1s)
4. 跳向边缘+缩小 (1s)
5. 淡出消失

### 旅途中显示
- 目的地链Logo
- 进度条+剩余时间
- 状态消息

### 归来动画 (3秒)  
1. 远处小点出现
2. 逐渐变大走来
3. 展示礼物🎁
4. 开心跳跃
5. 恢复IDLE

---

## 5. 互动动画

### 点击
- 1次 → 眨眼"你好呀！"
- 2-5次 → 跳跃"嘿嘿~"
- 10+次 → 生气"别戳了！💢"

### 拖拽
- 开始 → 惊慌"啊啊啊！"
- 放下 → 缓气"呼..."

### 喂食
- 🍀四叶草 → +10能量
- 🥪三明治 → +30能量
- 🍰蛋糕 → +50能量+心情MAX

---

## 6. 粒子特效

| 粒子 | 运动 | 场景 |
|------|------|------|
| ⭐✨ | 向上 | 开心 |
| ❤️💕 | 向上 | 喜欢 |
| 💰🪙 | 下落 | 发财 |
| 💦 | 侧向 | 害怕 |
| 🔥 | 向上 | 暴涨 |
| 💧 | 下落 | 伤心 |
| 💢 | 放射 | 生气 |

---

## 实施优先级

| 优先级 | 任务 | 时间 |
|--------|------|------|
| P0 | 原生窗口点击穿透 | 1-2天 |
| P1 | 旅行动画序列 | 1天 |
| P2 | 家场景设计 | 2-3天 |
| P3 | 动画细节优化 | 持续 |

---

## ✅ P0 已实现：点击穿透功能

### 新增文件
| 文件 | 描述 |
|------|------|
| `src-tauri/src/native_window.rs` | Rust 原生窗口 API 封装 (Windows) |
| `src/utils/tauriNative.ts` | TypeScript Tauri 命令接口 |
| `src/hooks/useClickThrough.ts` | React Hook 点击穿透控制 |

### 工作原理
```
鼠标位置检测:
┌─────────────────────────────┐
│     透明区域 (点击穿透)      │
│        ↓ 鼠标穿过窗口        │
│   ┌───────────────────┐     │
│   │   🐸 青蛙 SVG     │     │ ← onMouseEnter → 禁用穿透
│   │   (可交互区域)    │     │ ← onMouseLeave → 启用穿透
│   └───────────────────┘     │
│                             │
└─────────────────────────────┘
```

### Tauri 命令
- `set_click_through(window_label, enabled)` - 设置点击穿透
- `is_click_through_supported()` - 检查平台支持

### 测试方法
```bash
cd frontend/src-tauri
cargo tauri dev
```
